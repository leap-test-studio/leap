{
  "ProjectMasterId": "ea5fa1a1-ec12-4b2e-8342-7da99e1b31c0",
  "nodes": [
    { "id": "start", "type": "START_TASK", "data": { "label": "Start" }, "position": { "x": 50, "y": 300 }, "width": 77, "height": 76 },
    {
      "id": "twZpYF-jiG",
      "type": "TIMER_TASK",
      "data": { "conditions": [], "timer": 0, "label": "Timer Event" },
      "position": { "x": 500.71875, "y": 311 },
      "width": 56,
      "height": 40,
      "selected": false,
      "positionAbsolute": { "x": 500.71875, "y": 311 }
    },
    {
      "id": "eTcc1xlAvq",
      "type": "CASE_TASK",
      "data": {
        "label": "TCID0001",
        "seqNo": "0001",
        "enabled": true,
        "id": "e14c7be2-2e0e-412d-823d-4548a9319329",
        "type": 1,
        "title": "Switch Team API\nCheck whether Switch Team API Call is successful",
        "given": "",
        "when": "",
        "then": "",
        "execSteps": {
          "reqBody": "{\"user_email\":\"${OKTA_USERNAME}@ebates.com\",\"team_name\":\"admin\"}",
          "reqbody": "{\"user_email\":\"${OKTA_USERNAME}@ebates.com\",\"team_name\":\"admin\"}",
          "resBody": "",
          "condition": "response?.meta?.status?.code === \"OK\" && response?.data === \"records updated/inserted successfully\"",
          "statusCode": 200
        },
        "settings": {
          "host": "${API_URL}",
          "path": "/flow/team",
          "sleep": { "interval": 2000, "timeType": 0 },
          "header": [
            { "key": "client-agent", "value": "rr-data-portal" },
            { "key": "authorization", "value": "Bearer ${JWT_TOKEN}" }
          ],
          "method": "PUT",
          "timeout": 5000
        },
        "tags": ["SwitchTeam"],
        "updatedBy": "91d658d0-2baf-4eb8-9333-f3923a51fb15",
        "AccountId": "9a8ab676-1760-4ab3-a060-0fe738dd4582",
        "TestScenarioId": "0fa26303-38a4-47e4-9601-11ceef6351e0",
        "TenantId": null,
        "createdAt": "2024-10-10T10:52:08.761Z",
        "updatedAt": "2024-10-10T10:52:08.781Z",
        "deletedAt": null
      },
      "position": { "x": 742.71875, "y": 193 },
      "width": 70,
      "height": 70,
      "selected": false,
      "positionAbsolute": { "x": 742.71875, "y": 193 },
      "dragging": true
    },
    {
      "id": "rRq8GZchCV",
      "type": "CASE_TASK",
      "data": {
        "label": "TCID0003",
        "seqNo": "0003",
        "enabled": true,
        "id": "a56eb8c6-c65a-4a42-aef1-6c10f61a8b09",
        "type": 1,
        "title": "Fetch list of Teams\nCheck whether API responds list of Teams assign for User",
        "given": "",
        "when": "",
        "then": "",
        "execSteps": { "resBody": "", "condition": "response?.data?.length > 1", "statusCode": 200 },
        "settings": {
          "host": "${API_URL}",
          "path": "/flow/teams?user_email=${OKTA_USERNAME}@ebates.com",
          "sleep": { "interval": 2000, "timeType": 0 },
          "header": [
            { "key": "client-agent", "value": "rr-data-portal" },
            { "key": "authorization", "value": "Bearer ${JWT_TOKEN}" }
          ],
          "method": "GET",
          "timeout": 5000
        },
        "tags": ["ListOfTeams"],
        "updatedBy": "91d658d0-2baf-4eb8-9333-f3923a51fb15",
        "AccountId": "9a8ab676-1760-4ab3-a060-0fe738dd4582",
        "TestScenarioId": "0fa26303-38a4-47e4-9601-11ceef6351e0",
        "TenantId": null,
        "createdAt": "2024-10-10T10:52:08.761Z",
        "updatedAt": "2024-10-10T10:52:08.781Z",
        "deletedAt": null
      },
      "position": { "x": 735.71875, "y": 378 },
      "width": 70,
      "height": 70,
      "selected": false,
      "positionAbsolute": { "x": 735.71875, "y": 378 },
      "dragging": true
    },
    {
      "id": "42OYxAZwMh",
      "type": "SCENARIO_TASK",
      "data": {
        "status": true,
        "id": "7c9d3b39-bbde-4288-a4ab-602b92cd73c6",
        "name": "API - Secret Manager",
        "description": "Validate Secrets APIs",
        "remark": [],
        "settings": null,
        "updatedBy": null,
        "ProjectMasterId": "ea5fa1a1-ec12-4b2e-8342-7da99e1b31c0",
        "AccountId": "9a8ab676-1760-4ab3-a060-0fe738dd4582",
        "TenantId": null,
        "createdAt": "2024-10-10T10:52:08.761Z",
        "updatedAt": "2024-10-10T10:52:08.775Z",
        "TestCases": [
          {
            "label": "TCID0006",
            "seqNo": "0006",
            "enabled": true,
            "id": "d173adfb-961c-4651-ab51-cc22fe4c548e",
            "type": 1,
            "title": "Validate List Secrets from QA",
            "given": "",
            "when": "",
            "then": "",
            "execSteps": { "statusCode": 200, "condition": "$response.meta?.status?.code === \"OK\" && $response.data?.length > 0" },
            "settings": {
              "sleep": { "interval": 2000, "timeType": 0 },
              "method": "GET",
              "host": "${API_URL}",
              "path": "/flow/secret/list?team_name=${TEAM_NAME}",
              "header": [
                { "key": "authorization", "value": "Bearer ${JWT_TOKEN}", "description": "Access Token" },
                { "key": "client-agent", "value": "rr-data-portal", "description": "Client Agent" }
              ]
            },
            "tags": ["ListSecrets"],
            "updatedBy": "91d658d0-2baf-4eb8-9333-f3923a51fb15",
            "AccountId": "9a8ab676-1760-4ab3-a060-0fe738dd4582",
            "TestScenarioId": "7c9d3b39-bbde-4288-a4ab-602b92cd73c6",
            "TenantId": null,
            "createdAt": "2024-10-10T10:52:08.761Z",
            "updatedAt": "2024-10-10T10:52:08.789Z",
            "deletedAt": null
          },
          {
            "label": "TCID0007",
            "seqNo": "0007",
            "enabled": true,
            "id": "021865d2-cf59-404b-add0-859b78e5ffbe",
            "type": 1,
            "title": "Validate List Secrets from Preview",
            "given": "",
            "when": "",
            "then": "",
            "execSteps": { "statusCode": 200, "condition": "$response.meta?.status?.code === \"OK\" && $response.data?.length > 0" },
            "settings": {
              "sleep": { "interval": 2000, "timeType": 0 },
              "method": "GET",
              "host": "${API_PREVIEW_URL}",
              "path": "/flow/secret/list?team_name=${TEAM_NAME}",
              "header": [
                { "key": "authorization", "value": "Bearer ${JWT_TOKEN}", "description": "Access Token" },
                { "key": "client-agent", "value": "rr-data-portal", "description": "Client Agent" }
              ]
            },
            "tags": ["ListSecrets"],
            "updatedBy": "91d658d0-2baf-4eb8-9333-f3923a51fb15",
            "AccountId": "9a8ab676-1760-4ab3-a060-0fe738dd4582",
            "TestScenarioId": "7c9d3b39-bbde-4288-a4ab-602b92cd73c6",
            "TenantId": null,
            "createdAt": "2024-10-10T10:52:08.761Z",
            "updatedAt": "2024-10-10T10:52:08.789Z",
            "deletedAt": null
          },
          {
            "label": "TCID0008",
            "seqNo": "0008",
            "enabled": true,
            "id": "82315fbc-ac35-489f-a518-c8582169b266",
            "type": 1,
            "title": "Validate Create Secret on QA",
            "given": "",
            "when": "",
            "then": "",
            "execSteps": {
              "statusCode": 201,
              "condition": "$response.meta?.status?.code === \"Created\"",
              "reqBody": "{\n  \"team_name\": \"${TEAM_NAME}\",\n  \"secret_name\": \"/enrich/flow/${TEAM_NAME}/sanity-test-${RELEASE_VERSION}\",\n  \"description\": \"Created by API Test Automation\",\n  \"secret\": {\n    \"mysql_db_host\": \"\",\n    \"mysql_db_name\": \"\",\n    \"mysql_db_password\": \"\",\n    \"mysql_db_port\": \"\",\n    \"mysql_db_user\": \"\",\n    \"VERSION\": \"${RELEASE_VERSION}\"\n  },\n  \"tags\": {\n    \"Environment\": \"nonprod\",\n    \"Type\": \"mysql\"\n  }\n}"
            },
            "settings": {
              "sleep": { "interval": 2000, "timeType": 0 },
              "method": "POST",
              "host": "${API_URL}",
              "path": "/flow/secret",
              "header": [
                { "key": "authorization", "value": "Bearer ${JWT_TOKEN}", "description": "Access Token" },
                { "key": "client-agent", "value": "rr-data-portal", "description": "Client Agent" }
              ]
            },
            "tags": ["CreateSecret", "SuccessCase"],
            "updatedBy": "91d658d0-2baf-4eb8-9333-f3923a51fb15",
            "AccountId": "9a8ab676-1760-4ab3-a060-0fe738dd4582",
            "TestScenarioId": "7c9d3b39-bbde-4288-a4ab-602b92cd73c6",
            "TenantId": null,
            "createdAt": "2024-10-10T10:52:08.761Z",
            "updatedAt": "2024-10-10T10:52:08.789Z",
            "deletedAt": null
          },
          {
            "label": "TCID0009",
            "seqNo": "0009",
            "enabled": true,
            "id": "2d892ed1-1b6e-4792-af7b-e25592c24572",
            "type": 1,
            "title": "Validate Create Secret on QA for Existing Secret",
            "given": "",
            "when": "",
            "then": "",
            "execSteps": {
              "statusCode": 409,
              "condition": "$response.meta?.status?.code === \"Conflict\"",
              "reqBody": "{\n  \"team_name\": \"${TEAM_NAME}\",\n  \"secret_name\": \"/enrich/flow/${TEAM_NAME}/sanity-test-${RELEASE_VERSION}\",\n  \"description\": \"Created by API Test Automation\",\n  \"secret\": {\n    \"mysql_db_host\": \"\",\n    \"mysql_db_name\": \"\",\n    \"mysql_db_password\": \"\",\n    \"mysql_db_port\": \"\",\n    \"mysql_db_user\": \"\",\n    \"VERSION\": \"${RELEASE_VERSION}\"\n  },\n  \"tags\": {\n    \"Environment\": \"nonprod\",\n    \"Type\": \"mysql\"\n  }\n}"
            },
            "settings": {
              "sleep": { "interval": 2000, "timeType": 0 },
              "method": "POST",
              "host": "${API_URL}",
              "path": "/flow/secret",
              "header": [
                { "key": "authorization", "value": "Bearer ${JWT_TOKEN}", "description": "Access Token" },
                { "key": "client-agent", "value": "rr-data-portal", "description": "Client Agent" }
              ]
            },
            "tags": ["CreateSecret", "DuplicateCase"],
            "updatedBy": "91d658d0-2baf-4eb8-9333-f3923a51fb15",
            "AccountId": "9a8ab676-1760-4ab3-a060-0fe738dd4582",
            "TestScenarioId": "7c9d3b39-bbde-4288-a4ab-602b92cd73c6",
            "TenantId": null,
            "createdAt": "2024-10-10T10:52:08.761Z",
            "updatedAt": "2024-10-10T10:52:08.789Z",
            "deletedAt": null
          },
          {
            "label": "TCID0010",
            "seqNo": "0010",
            "enabled": true,
            "id": "59ee62b8-087f-4be8-a130-ae823f9a1b38",
            "type": 1,
            "title": "Validate Update Secret on QA for Existing Secret",
            "given": "",
            "when": "",
            "then": "",
            "execSteps": {
              "statusCode": 201,
              "condition": "$response.meta?.status?.code === \"Created\"",
              "reqBody": "{\n  \"team_name\": \"${TEAM_NAME}\",\n  \"secret_name\": \"/enrich/flow/${TEAM_NAME}/sanity-test-${RELEASE_VERSION}\",\n  \"secret\": {\n    \"VERSION\": \"${RELEASE_VERSION}-modified\"\n  }\n}"
            },
            "settings": {
              "sleep": { "interval": 2000, "timeType": 0 },
              "method": "PUT",
              "host": "${API_URL}",
              "path": "/flow/secret",
              "header": [
                { "key": "authorization", "value": "Bearer ${JWT_TOKEN}", "description": "Access Token" },
                { "key": "client-agent", "value": "rr-data-portal", "description": "Client Agent" }
              ]
            },
            "tags": ["ModifySecret"],
            "updatedBy": "91d658d0-2baf-4eb8-9333-f3923a51fb15",
            "AccountId": "9a8ab676-1760-4ab3-a060-0fe738dd4582",
            "TestScenarioId": "7c9d3b39-bbde-4288-a4ab-602b92cd73c6",
            "TenantId": null,
            "createdAt": "2024-10-10T10:52:08.761Z",
            "updatedAt": "2024-10-10T10:52:08.790Z",
            "deletedAt": null
          },
          {
            "label": "TCID0011",
            "seqNo": "0011",
            "enabled": true,
            "id": "de08de88-ee9c-40ac-92cc-156cb3a78d9a",
            "type": 1,
            "title": "Validate Update Secret on QA for Non-Existing Secret",
            "given": "",
            "when": "",
            "then": "",
            "execSteps": {
              "statusCode": 406,
              "condition": "$response.meta?.status?.code === \"Not Acceptable\"",
              "reqBody": "{\n  \"team_name\": \"${TEAM_NAME}\",\n  \"secret_name\": \"/enrich/flow/${TEAM_NAME}/invalid-secret-${RELEASE_VERSION}\",\n  \"secret\": {\n    \"VERSION\": \"${RELEASE_VERSION}-modified\"\n  }\n}"
            },
            "settings": {
              "sleep": { "interval": 2000, "timeType": 0 },
              "method": "PUT",
              "host": "${API_URL}",
              "path": "/flow/secret",
              "header": [
                { "key": "authorization", "value": "Bearer ${JWT_TOKEN}", "description": "Access Token" },
                { "key": "client-agent", "value": "rr-data-portal", "description": "Client Agent" }
              ]
            },
            "tags": ["ModifySecret", "NotFound"],
            "updatedBy": "91d658d0-2baf-4eb8-9333-f3923a51fb15",
            "AccountId": "9a8ab676-1760-4ab3-a060-0fe738dd4582",
            "TestScenarioId": "7c9d3b39-bbde-4288-a4ab-602b92cd73c6",
            "TenantId": null,
            "createdAt": "2024-10-10T10:52:08.761Z",
            "updatedAt": "2024-10-10T10:52:08.790Z",
            "deletedAt": null
          }
        ]
      },
      "position": { "x": 958.71875, "y": 290 },
      "width": 106,
      "height": 50,
      "selected": false,
      "positionAbsolute": { "x": 958.71875, "y": 290 },
      "dragging": true
    },
    {
      "id": "TW1dMhY1MN",
      "type": "CASE_TASK",
      "data": {
        "label": "TCID0001",
        "seqNo": "0001",
        "enabled": true,
        "id": "e14c7be2-2e0e-412d-823d-4548a9319329",
        "type": 1,
        "title": "Switch Team API\nCheck whether Switch Team API Call is successful",
        "given": "",
        "when": "",
        "then": "",
        "execSteps": {
          "reqBody": "{\"user_email\":\"${OKTA_USERNAME}@ebates.com\",\"team_name\":\"admin\"}",
          "reqbody": "{\"user_email\":\"${OKTA_USERNAME}@ebates.com\",\"team_name\":\"admin\"}",
          "resBody": "",
          "condition": "response?.meta?.status?.code === \"OK\" && response?.data === \"records updated/inserted successfully\"",
          "statusCode": 200
        },
        "settings": {
          "host": "${API_URL}",
          "path": "/flow/team",
          "sleep": { "interval": 2000, "timeType": 0 },
          "header": [
            { "key": "client-agent", "value": "rr-data-portal" },
            { "key": "authorization", "value": "Bearer ${JWT_TOKEN}" }
          ],
          "method": "PUT",
          "timeout": 5000
        },
        "tags": ["SwitchTeam"],
        "updatedBy": "91d658d0-2baf-4eb8-9333-f3923a51fb15",
        "AccountId": "9a8ab676-1760-4ab3-a060-0fe738dd4582",
        "TestScenarioId": "0fa26303-38a4-47e4-9601-11ceef6351e0",
        "TenantId": null,
        "createdAt": "2024-10-10T10:52:08.761Z",
        "updatedAt": "2024-10-10T10:52:08.781Z",
        "deletedAt": null
      },
      "position": { "x": 1370.71875, "y": 253 },
      "width": 70,
      "height": 70,
      "selected": true,
      "positionAbsolute": { "x": 1370.71875, "y": 253 },
      "dragging": true
    }
  ],
  "edges": [
    {
      "source": "start",
      "sourceHandle": "start-node",
      "target": "twZpYF-jiG",
      "targetHandle": "target:twZpYF-jiG",
      "animated": true,
      "markerEnd": { "type": "arrowclosed", "color": "rgb(148 163 184)" },
      "type": "default",
      "id": "reactflow__edge-startstart-node-twZpYF-jiGtarget:twZpYF-jiG"
    },
    {
      "source": "twZpYF-jiG",
      "sourceHandle": "source:twZpYF-jiG",
      "target": "eTcc1xlAvq",
      "targetHandle": "target:CASE_TASK",
      "animated": true,
      "markerEnd": { "type": "arrowclosed", "color": "rgb(148 163 184)" },
      "type": "default",
      "id": "reactflow__edge-twZpYF-jiGsource:twZpYF-jiG-eTcc1xlAvqtarget:CASE_TASK"
    },
    {
      "source": "twZpYF-jiG",
      "sourceHandle": "source:twZpYF-jiG",
      "target": "rRq8GZchCV",
      "targetHandle": "target:CASE_TASK",
      "animated": true,
      "markerEnd": { "type": "arrowclosed", "color": "rgb(148 163 184)" },
      "type": "default",
      "id": "reactflow__edge-twZpYF-jiGsource:twZpYF-jiG-rRq8GZchCVtarget:CASE_TASK"
    },
    {
      "source": "eTcc1xlAvq",
      "sourceHandle": "source:CASE_TASK",
      "target": "42OYxAZwMh",
      "targetHandle": "target:SCENARIO_TASK",
      "animated": true,
      "markerEnd": { "type": "arrowclosed", "color": "rgb(148 163 184)" },
      "type": "default",
      "id": "reactflow__edge-eTcc1xlAvqsource:CASE_TASK-42OYxAZwMhtarget:SCENARIO_TASK"
    },
    {
      "source": "rRq8GZchCV",
      "sourceHandle": "source:CASE_TASK",
      "target": "42OYxAZwMh",
      "targetHandle": "target:SCENARIO_TASK",
      "animated": true,
      "markerEnd": { "type": "arrowclosed", "color": "rgb(148 163 184)" },
      "type": "default",
      "id": "reactflow__edge-rRq8GZchCVsource:CASE_TASK-42OYxAZwMhtarget:SCENARIO_TASK"
    },
    {
      "source": "42OYxAZwMh",
      "sourceHandle": "source:SCENARIO_TASK",
      "target": "TW1dMhY1MN",
      "targetHandle": "target:CASE_TASK",
      "animated": true,
      "markerEnd": { "type": "arrowclosed", "color": "rgb(148 163 184)" },
      "type": "default",
      "id": "reactflow__edge-42OYxAZwMhsource:SCENARIO_TASK-TW1dMhY1MNtarget:CASE_TASK"
    }
  ]
}
